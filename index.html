<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–Ω–∞—Ç –Ω–∞ –ª–∏–º–æ–Ω–∞–¥</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12">
                <h2 class="text-center">–î–æ–Ω–∞—Ç –Ω–∞ –õ–∏–º–æ–Ω–∞–¥</h2>
                <div class="card mt-4">
                    <div class="card-header">
                        <h4>–õ–∏–º–æ–Ω–∞–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å</h4>
                    </div>
                    <div class="card-body">
                        <p id="balance" class="display-4 text-center">0 üçã</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-6 offset-md-3">
                <div class="card">
                    <div class="card-header">
                        <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–Ω–∞—Ç–∞—Ö</h4>
                    </div>
                    <div class="card-body">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>–°–ø–æ—Å–æ–± –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</td>
                                    <td>–°–ë–ü, –ë–∞–Ω–∫ –Æ–º–∞–Ω–∏</td>
                                </tr>
                                <tr>
                                    <td>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</td>
                                    <td>+79773444105</td>
                                </tr>
                                <tr>
                                    <td>–ü–æ–ª—É—á–∞—Ç–µ–ª—å</td>
                                    <td>–ú–∏–ª–æ–≤–∞–Ω–æ–≤ –ú.–ò.</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="text-center">–ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –ª–∏–º–æ–Ω–∞–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. ü•§</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const pantryUrl = 'https://getpantry.cloud/apiv1/pantry/ad586b77-0421-459c-a631-ffc793bf770f/basket/donat-na-lomonad';
            const myApiUrl = 'https://script.google.com/macros/s/AKfycbxguYebQbigqifFXtAaq_Q_Fo2FfQ0SPLhhk-bmnKFjEvkbCS0aHnUS9zS5z3UpB0Sa/exec';

            fetch(pantryUrl)
                .then(response => response.json())
                .then(data => {
                    // Update balance and history with pantryUrl data
                    updatePage(data);
                    // Check myApi for updated data
                    fetch(myApiUrl)
                        .then(response => response.json())
                        .then(newData => {
                            // Compare data with pantryUrl
                            if (!isEqual(data, newData)) {
                                // If data is different, update page with myApi data
                                updatePage(newData);
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching data from myApi:', error);
                        });
                })
                .catch(error => {
                    document.getElementById('balance').innerText = 'Failed to load balance.';
                    console.error('Error fetching data from pantryUrl:', error);
                });

            function updatePage(data) {
                // Update balance
                document.getElementById('balance').innerText = data.balance + ' üçã';
            }

            function isEqual(data1, data2) {
                // Compare balance and history arrays
                return JSON.stringify(data1) === JSON.stringify(data2);
            }
        });
    </script>
</body>

</html>
